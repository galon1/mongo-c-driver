{
    "runOn": [
      {
        "minServerVersion": "6.2.0",
        "topology": [
          "replicaset",
          "sharded",
          "load-balanced"
        ]
      }
    ],
    "database_name": "default",
    "collection_name": "default",
    "data": [],
    "encrypted_fields": {
      "escCollection": "enxcol_.default.esc",
      "eccCollection": "enxcol_.default.ecc",
      "ecocCollection": "enxcol_.default.ecoc",
      "fields": [
        {
          "keyId": {
            "$binary": {
              "base64": "EjRWeBI0mHYSNBI0VniQEg==",
              "subType": "04"
            }
          },
          "path": "encryptedInt",
          "bsonType": "int",
          "queries": {
            "queryType": "rangePreview",
            "contention": {
              "$numberLong": "0"
            },
            "sparsity": {
              "$numberInt": "1"
            },
            "min": {
              "$numberInt": "0"
            },
            "max": {
              "$numberInt": "200"
            }
          }
        }
      ]
    },
    "key_vault_data": [
      {
        "_id": {
          "$binary": {
            "base64": "EjRWeBI0mHYSNBI0VniQEg==",
            "subType": "04"
          }
        },
        "keyMaterial": {
          "$binary": {
            "base64": "sHe0kz57YW7v8g9VP9sf/+K1ex4JqKc5rf/URX3n3p8XdZ6+15uXPaSayC6adWbNxkFskuMCOifDoTT+rkqMtFkDclOy884RuGGtUysq3X7zkAWYTKi8QAfKkajvVbZl2y23UqgVasdQu3OVBQCrH/xY00nNAs/52e958nVjBuzQkSb1T8pKJAyjZsHJ60+FtnfafDZSTAIBJYn7UWBCwQ==",
            "subType": "00"
          }
        },
        "creationDate": {
          "$date": {
            "$numberLong": "1648914851981"
          }
        },
        "updateDate": {
          "$date": {
            "$numberLong": "1648914851981"
          }
        },
        "status": {
          "$numberInt": "0"
        },
        "masterKey": {
          "provider": "local"
        }
      }
    ],
    "tests": [
      {
        "description": "Insert and find FLE2 indexed range field",
        "clientOptions": {
          "autoEncryptOpts": {
            "kmsProviders": {
              "local": {
                "key": {
                  "$binary": {
                    "base64": "Mng0NCt4ZHVUYUJCa1kxNkVyNUR1QURhZ2h2UzR2d2RrZzh0cFBwM3R6NmdWMDFBMUN3YkQ5aXRRMkhGRGdQV09wOGVNYUMxT2k3NjZKelhaQmRCZGJkTXVyZG9uSjFk",
                    "subType": "00"
                  }
                }
              }
            }
          }
        },
        "operations": [
          {
            "name": "insertOne",
            "arguments": {
              "document": {
                "_id": 1,
                "encryptedInt": {
                  "$numberInt": "1"
                }
              }
            }
          },
          {
            "name": "find",
            "arguments": {
              "filter": {
                "encryptedInt": {
                  "$numberInt": "1"
                }
              }
            },
            "result": [
              {
                "_id": 1,
                "encryptedInt": {
                  "$numberInt": "1"
                }
              }
            ]
          }
        ],
        "expectations": [
          {
            "command_started_event": {
              "command": {
                "listCollections": 1,
                "filter": {
                  "name": "default"
                }
              },
              "command_name": "listCollections"
            }
          },
          {
            "command_started_event": {
              "command": {
                "find": "datakeys",
                "filter": {
                  "$or": [
                    {
                      "_id": {
                        "$in": [
                          {
                            "$binary": {
                              "base64": "EjRWeBI0mHYSNBI0VniQEg==",
                              "subType": "04"
                            }
                          }
                        ]
                      }
                    },
                    {
                      "keyAltNames": {
                        "$in": []
                      }
                    }
                  ]
                },
                "$db": "keyvault",
                "readConcern": {
                  "level": "majority"
                }
              },
              "command_name": "find"
            }
          },
          {
            "command_started_event": {
              "command": {
                "insert": "default",
                "documents": [
                  {
                    "_id": 1,
                    "encryptedInt": {
                      "$$type": "binData"
                    }
                  }
                ],
                "ordered": true,
                "encryptionInformation": {
                  "type": 1,
                  "schema": {
                    "default.default": {
                      "escCollection": "enxcol_.default.esc",
                      "eccCollection": "enxcol_.default.ecc",
                      "ecocCollection": "enxcol_.default.ecoc",
                      "fields": [
                        {
                          "keyId": {
                            "$binary": {
                              "base64": "EjRWeBI0mHYSNBI0VniQEg==",
                              "subType": "04"
                            }
                          },
                          "path": "encryptedInt",
                          "bsonType": "int",
                          "queries": {
                            "queryType": "rangePreview",
                            "contention": {
                              "$numberLong": "0"
                            },
                            "sparsity": {
                              "$numberInt": "1"
                            },
                            "min": {
                              "$numberInt": "0"
                            },
                            "max": {
                              "$numberInt": "200"
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              },
              "command_name": "insert"
            }
          },
          {
            "command_started_event": {
              "command": {
                "find": "default",
                "filter": {
                  "$and": [
                    {
                      "encryptedInt": {
                        "$gte": {
                          "$binary": {
                            "base64": "CgUBAAADcGF5bG9hZADBAAAABGcAhQAAAAMwAH0AAAAFZAAgAAAAALGGQ/CRD+pGLD53BZzWcCcYbuGLVEyjzXIx7b+ux/q2BXMAIAAAAACOC6mXEZL27P9hethZbtKYsTXKK+FpgQ9Axxmn9N/cCwVjACAAAAAAKs6X8gaa+AJ6PpxVicsk7iCXpSYIkQ5zB0KnXqlfCWgAAAVlACAAAAAA65pz95EthqQpfoHS9nWvdCh05AV+OokP7GUaI+7j8+wSY20AAAAAAAAAAAAAEHBheWxvYWRJZAAAAAAAEGZpcnN0T3BlcmF0b3IAAgAAABBzZWNvbmRPcGVyYXRvcgAEAAAAAA==",
                            "subType": "06"
                          }
                        }
                      }
                    },
                    {
                      "encryptedInt": {
                        "$lte": {
                          "$binary": {
                            "base64": "CjsAAAAQcGF5bG9hZElkAAAAAAAQZmlyc3RPcGVyYXRvcgACAAAAEHNlY29uZE9wZXJhdG9yAAQAAAAA",
                            "subType": "06"
                          }
                        }
                      }
                    }
                  ]
                },
                "encryptionInformation": {
                  "type": 1,
                  "schema": {
                    "default.default": {
                      "escCollection": "enxcol_.default.esc",
                      "eccCollection": "enxcol_.default.ecc",
                      "ecocCollection": "enxcol_.default.ecoc",
                      "fields": [
                        {
                          "keyId": {
                            "$binary": {
                              "base64": "EjRWeBI0mHYSNBI0VniQEg==",
                              "subType": "04"
                            }
                          },
                          "path": "encryptedInt",
                          "bsonType": "int",
                          "queries": {
                            "queryType": "rangePreview",
                            "contention": {
                              "$numberLong": "0"
                            },
                            "sparsity": {
                              "$numberInt": "1"
                            },
                            "min": {
                              "$numberInt": "0"
                            },
                            "max": {
                              "$numberInt": "200"
                            }
                          }
                        }
                      ]
                    }
                  }
                }
              },
              "command_name": "find"
            }
          }
        ],
        "outcome": {
          "collection": {
            "data": [
              {
                "_id": {
                  "$numberInt": "1"
                },
                "encryptedInt": {
                  "$$type": "binData"
                },
                "__safeContent__": [
                  {
                    "$binary": {
                      "base64": "5nRutVIyq7URVOVtbE4vM01APSIajAVnsShMwjBlzkM=",
                      "subType": "00"
                    }
                  },
                  {
                    "$binary": {
                      "base64": "25j9sQXZCihCmHKvTHgaBsAVZFcGPn7JjHdrCGlwyyw=",
                      "subType": "00"
                    }
                  },
                  {
                    "$binary": {
                      "base64": "x7GR49EN0t3WXQDihkrbonK7qNIBYC87tpL/XEUyIYc=",
                      "subType": "00"
                    }
                  },
                  {
                    "$binary": {
                      "base64": "JfYUqWF+OoGjiYkRI4L5iPlF+T1Eleul7Fki22jp4Qc=",
                      "subType": "00"
                    }
                  },
                  {
                    "$binary": {
                      "base64": "q1RyGfIgsaQHoZFRw+DD28V26rN5hweApPLwExncvT8=",
                      "subType": "00"
                    }
                  },
                  {
                    "$binary": {
                      "base64": "L2PFeKGvLS6C+DLudR6fGlBq3ERPvjWvRyNRIA2HVb0=",
                      "subType": "00"
                    }
                  },
                  {
                    "$binary": {
                      "base64": "CWxaNqL3iP1yCixDkcmf9bmW3E5VeN8TJkg1jJe528s=",
                      "subType": "00"
                    }
                  },
                  {
                    "$binary": {
                      "base64": "+vC6araOEo+fpW7PSIP40/EnzBCj1d2N10Jr3rrXJJM=",
                      "subType": "00"
                    }
                  },
                  {
                    "$binary": {
                      "base64": "6SV63Mf51Z6A6p2X3rCnJKCu6ku3Oeb45mBYbz+IoAo=",
                      "subType": "00"
                    }
                  }
                ]
              }
            ]
          }
        }
      }
    ]
  }